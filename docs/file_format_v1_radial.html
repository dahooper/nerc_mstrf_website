<HTML lang="en">
<HEAD>
<META name="keywords"
      content="MST, VHF, Doppler, radar, wind, profiler, wave, turbulence">
<META name="description"
      content="NERC MST Radar Facility at Aberystwyth">
<META name="author" Content="David Hooper">
<META name="Generator" Content="emacs">
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<LINK rel="stylesheet" type="text/css" href="nerc_mstrf_style.css">
<TITLE>MST radar radial file format</TITLE>
</HEAD>

<BODY leftmargin="0" marginheight="0" topmargin="0">
<A name="top">
<TABLE align="center" border="0"
       cellpadding="0" cellspacing="0" width="100%">
  <TR><TD bgcolor="#ffd000">
    <IMG height="5" src="FIGS/pixel_gold.png"></TD></TR>
</TABLE>

<TABLE align="center" bgcolor="#ffffff" border="0" cellpadding="0" 
       cellspacing="0" width="100%">
  <TR>
    <TD align="center" bgcolor="#ffd000" rowspan="5" width="170" valign="top">
      <IMG alt="NERC Logo" border="0" src="LOGOS/nerc_button.png">
      <IMG alt="MSTRF Logo" border="0" src="LOGOS/mst_button.png"><BR><BR>
      <A class="menu_avail" href="index.html">HOME</A><BR><BR>
      <A class="menu_avail" href="announcements.html">ANNOUNCEMENTS</A><BR><BR>
      <A class="menu_avail" href="contacts.html">CONTACTS</A><BR><BR>
      <A class="menu_avail" href="data.html">DATA</A><BR><BR>
      <A class="menu_avail" href="instruments.html">INSTRUMENTS</A><BR><BR>
      <A class="menu_avail" href="main_menu.html">MAIN MENU</A><BR><BR>
      <A class="menu_avail" href="miscellaneous.html">MISCELLANEOUS</A><BR><BR>
      <A class="menu_avail" href="plots.html">PLOTS</A><BR><BR>
      <A class="menu_avail" href="publications.html">PUBLICATIONS</A><BR><BR>
      <A class="menu_avail" href="science.html">SCIENCE</A><BR><BR>
      <A class="menu_avail" href="wind_prof_prin.html">
        WIND-PROFILER<BR>PRINCIPLES</A><BR><BR><BR>
      <B>For this page:</B><BR>
      <A class="menu_avail" href="#internal">INTERNAL LINKS</A><BR><BR>
      <A class="menu_avail" href="#external">EXTERNAL LINKS</A><BR>
    </TD>

    <TD align="left" bgcolor="#ffd000" colspan="2" height="41" valign="top">
      <B>THE NERC MST RADAR FACILITY AT ABERYSTWYTH</B><BR>
      <DIV class="current">FILE FORMAT FOR VERSION-1 MST RADAR RADIAL
      DATA
        </DIV>
    </TD>
  </TR>

  <TR><TD align="centre" bgcolor="#ffffff" colspan="2" valign="top">
    <IMG height="3" src="FIGS/pixel_white.png"></TD>
  </TR>

  <TR>
    <TD align="left" width="10" valign="top">
      <IMG src="FIGS/pixel_white.png">
    </TD>

    <TD align="left" valign="top">
<!*** Page contents to go here ***>
<B>WARNING: Version-1 MST radar data products are DEPRECATED</B><BR>
Users are encouraged to make use of <A
href="file_format_v2_radial.html">Version-2 radial files.</A><BR>
<A href="sig_proc_version_nrs.html">Click here</A> to find out more about
the different versions of the signal processing.<BR><BR>

<B>File contents</B><BR>
These files contain radial (i.e. along-beam) profiles of the radar
return parameters (noise power, signal power, Doppler shift and
spectral width) for different beam pointing directions. 
Data are recorded at 150 m intervals in range and
cover the approximate range 2 - 20 (for the ST mode) or 58 - 96 km
(for the M mode). For most purposes the Cartesian data will suffice
and it should only be necessary to examine the radial data for
specialist studies. <BR>
<A href="file_contents.html">Click here</A> to find out about the
contents of other files.<BR><BR>

<B>File naming convention: </B><BR>

<CENTER><FONT
class="code_black">radar-mst_capel-dewi_YYYYMMDD_AARRRr.na</FONT></CENTER><BR>

<TABLE bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0">
  <TR>
    <TD><IMG width="20" src="FIGS/pixel_white.png"></TD>
    <TD valign="top"><FONT class="code_black">YYYY</FONT></TD>
    <TD><IMG width="20" src="FIGS/pixel_white.png"></TD>
    <TD valign="top">is a 4-digit year [1990 - ]</TD>
  </TR>
  <TR>
    <TD></TD>
    <TD valign="top"><FONT class="code_black">MM</FONT></TD>
    <TD></TD>
    <TD valign="top">is a 2-digit month [01 - 12]</TD>
  </TR>
  <TR>
    <TD></TD>
    <TD valign="top"><FONT class="code_black">DD</FONT></TD>
    <TD></TD>
    <TD valign="top">is a 2-digit day [01 - 31]</TD>
  </TR>
  <TR>
    <TD></TD>
    <TD valign="top"><FONT class="code_black">AA</FONT></TD>
    <TD></TD>
    <TD valign="top">is the altitude mode [<FONT
class="code_black">'st'</FONT>: approximately 2 - 20 km | <FONT
class="code_black">'m'</FONT>: approximately 58 - 96 km]</TD>
  </TR>
  <TR>
    <TD></TD>
    <TD valign="top"><FONT class="code_black">RRR</FONT></TD>
    <TD></TD>
    <TD valign="top">is the range resolution (m) [150 | 300 | 600 |
    1200 | 2400 | 4800]</TD>
  </TR>
</TABLE>
i.e. <FONT class="code_black">radar-mst_capel-dewi_20030601_st300r.na
</FONT> contains 300 m resolution radial data over the ST altitude
    range for 1st June 2003.<BR>
<A href="file_naming_conventions.html">Click here</A> for the background to the
file naming convention.<BR><BR>

<B>File location: </B><A
  href="http://badc.nerc.ac.uk/getdata/data_browser/badc/mst/data/mst-products-v1/radial"><FONT
  class="code_black">/badc/mst/data/mst-products-v1/radial/</FONT></A><BR>
<A href="data_locations.html">Click here</A> for the location of other files.<BR><BR>

<B>Archiving convention: </B><FONT class="code_black">YYYY/MM</FONT><BR>
<A href="archiving_conventions.html">Click here</A> for a further explanation.<BR><BR>

<B>File availability</B><BR>
Version-1 products are primarily available for the period 1st June
2003 - 31st Decemeber 2004.<BR><BR>

<B>File format</B><BR>
NASA-Ames files, with a File Format Index of 2110, are used. i.e. the
same as for <A href="file_format_v2_radial.html">Version-2 data
products</A>. However, there are some small differences in the file
contents. <BR><BR> 

Only those aspects of the file format which are essential for reading
the data will be described. For a full description of the NASA-Ames
formats, consult the <A href="
http://badc.nerc.ac.uk/help/formats/NASA-Ames/G-and-H-June-1998.html">Gaines
and Hipskind [1998]</A> document.<BR><BR>

The Cartesian file for 1st June 2003 will be used as an example. Text
in green represents actual file contents. Text in red is for
explanatory purposes only.<BR>

<DL><B>Header Lines</B>
  <DD><B>Line 1: </B><FONT class="code_green">80 2110</FONT><BR>
    Integer 1 corresponds to the total number of header lines,
    <FONT class="code_red">nr_header_lines</FONT><BR>
    Integer 2 corresponds to the File Format Index<BR><BR>

  <DD><B>Line 7: </B><FONT class="code_green">2003 06 01   2003 06 12</FONT><BR>
    Integers 1 - 3 correspond to the year, month and day on which the observations were made.<BR>

    Integers 4 - 6 correspond to the year, month and day on which the file was created.<BR><BR>

  <DD><B>Line 13: </B><FONT class="code_green">999.99 999.99 999.999
    99.999 999 9</FONT><BR>
    These are the numbers which represent missing data values for the
    'primary variables' (see below)<BR><BR>

  <DD><B>Line 44: </B><FONT class="code_green">3605 1</FONT><BR>
    Integer 1 corresponds to the total number of dwells in the file,
     <FONT class="code_red">nr_dwells_total</FONT><BR>
    Integer 2 corresponds to the number of cycle formats used,
     <FONT class="code_red">nr_cycle_fmts</FONT> - typically 1, but
     occaissionally more.<BR><BR>

  <DD><B>Line 47: </B><FONT class="code_green">7</FONT><BR>

  <DD><B>Line 48: </B><FONT class="code_green">515</FONT><BR>
    These lines contain <FONT class="code_red">nr_cycle_fmts</FONT> integers
    each. Each integer corresponds to a successive cycle format number,
    <FONT class="code_red">cycle_fmt_nr</FONT>.<BR>
    The line 47 integers correspond to the number of dwells per cycle for
    each succesive cycle format number,
    <FONT class="code_red">nr_dwells_per_cycle(cycle_fmt_nr)</FONT>.<BR>
    The line 48 integers correspond to the number of cycles which use 
    each succesive cycle format number,
    <FONT class="code_red">nr_cycles_per_fmt(cycle_fmt_nr)</FONT>.<BR>
    These numbers are not required in order to read in the data, but
    explain how the total number of dwells are distributed. The sum of
    <FONT class="code_red">nr_cycles_per_fmt(cycle_fmt_nr) * nr_cycles_per_fmt(cycle_fmt_nr)</FONT>
    (over all <FONT class="code_red">nr_cycle_fmts</FONT>) is equal to 
     <FONT class="code_red">nr_dwells_total</FONT>.<BR>
</DL>

<B>Data reading loop</B><BR>

After reading the above mentioned lines, wind forward to line <FONT
class="code_red">(nr_header_lines + 1)</FONT> where the data
begin. Associated with each cycle of observation there is a single
line of auxiliary variables followed by <FONT
class="code_red">nr_gates</FONT> lines of primary variables. Owing to
an oversight, the value of <FONT class="code_red">nr_gates</FONT> is
not recorded in the header. However, it can be read from the first
line of auxilliary variables and is the same for every dwell
thereafter. The data can therefore be read with a simple loop
structure of the form (shown here in Fortran syntax):<BR>

<PRE><FONT class="code_red">do total_dwell_nr = 1,nr_dwells_total
  read_auxiliary_variables
  do gate_nr = 1,nr_gates
    read_primary_variables
  end do
end do</FONT></PRE><BR>

<B>Reading auxiliary variables</B><BR>

The auxiliary variables line contains 17 values (a mixture of floating
point numbers, <FONT class="code_red">F</FONT>, and integers, <FONT
class="code_red">I</FONT>), shown here for the first dwell of the
first cycle:

<FONT class="code_green">105 130 1 1 1 11 27.7 6.0 8 2 2 320 18 147 512 128 1</FONT>

<DL>
  <DD><B>Value 1: Cycle time (s) </B><FONT class="code_red">I</FONT><BR>
    Technically speaking this is the second independent variable
    rather than an auxiliary variable. The time is given in seconds
    since 00:00:00 UTC for the day in question.<BR><BR>

  <DD><B>Value 2: Number of range gates </B><FONT class="code_red">I</FONT>
   <BR>As mentioned above,
    this number <FONT class="code_red">nr_gates</FONT> must be read
    from the first instance of an auxilliary variables line in order
    to determine the size of the inner data reading loop. The value
    remains the same for all dwells in the file. <BR><BR>

  <DD><B>Value 3: Cycle number </B><FONT class="code_red">I</FONT><BR>
    which ranges between 1 and the sum of <FONT
    class="code_red">nr_cycles_per_fmt(cycle_fmt_nr)</FONT> (over all
    <FONT class="code_red">nr_cycle_fmts</FONT>).<BR><BR>

  <DD><B>Value 4: Cycle format number </B><FONT class="code_red">I,
     cycle_fmt_nr</FONT><BR>
     which ranges between 1 and <FONT class="code_red">nr_cycle_fmts</FONT>.
     <BR><BR>

  <DD><B>Value 5: Dwell number (within current cycle) </B>
    <FONT class="code_red">I</FONT><BR>
    which is different from <FONT class="code_red">total_dwell_nr</FONT>
    (except for the first cycle). It ranges between 1 and 
    <FONT class="code_red">nr_dwells_per_cycle(cycle_fmt_nr)</FONT>.<BR><BR>

  <DD><B>Value 6: Beam number </B><FONT class="code_red">I</FONT><BR>
    which ranges between 1 and 17. The same information is contained within
    the next 2 auxilliary variables. Follow <a href="nerc_mstr_beam_dirs.html">
    this link</A> to see the relationship between beam number and beam
    pointing direction.<BR><BR>

  <DD><B>Value 7: Beam pointing azimuth (degrees) [clockwise from North] </B>
    <FONT class="code_red">F</FONT><BR>
    which can have values of 0.0&deg; (for a vertically directed beam only),
    27.5&deg;, 72.5&deg;, 117.5&deg;, 162.5&deg;, 207.5&deg;, 252.5&deg;,
    297.5&deg; or 342.5&deg;.<BR><BR>

  <DD><B>Value 8: Beam pointing zenith angle (degrees) [from vertical] </B>
     <FONT class="code_red">F</FONT><BR>
     which can have values of 0.0&deg;, 4.2&deg;, 6.0&deg;, 8.5&deg; or
     12.0&deg;. <BR><BR>

  <DD><B>Value 9: Transmitter pulse length (&mu;s) </B>
     <FONT class="code_red">I</FONT><BR>
     which can have values of 1, 2, 4, 8, 16 or 32 &mu;s.<BR><BR>

  <DD><B>Value 10: Transmitter sub-pulse length (&mu;s) </B> <FONT
     class="code_red">I</FONT><BR> which can have values of 1, 2, or 4
     &mu;s, for pulse lengths of 4 &mu;s and longer for which pulse
     coding has been used. If the sub-pulse length is equal to the
     pulse length, then no pulse coding is used. <BR><BR>

  <DD><B>Value 11: Receiver bandwidth (&mu;s) </B> <FONT
     class="code_red">I</FONT><BR> this is equal to the transmitter sub-pulse
     length, or to the pulse length if no pulse coding has been used, and
     determines the range resolution (values shown in brackets). Possible
     values are 1 &mu;s (150 m), 2 &mu;s (300 m), 4 &mu;s (600 m), 8 &mu;s 
     (1200 m), 16 &mu;s (2400 m) and 32 &mu;s (4800 m). This value is the
     same for all dwells within a single file.<BR><BR>

  <DD><B>Value 12: Inter-pulse period (&mu;s) </B>
    <FONT class="code_red">I</FONT><BR>
    This determines the maximum unambiguous range from which radar returns
    can be received (values in brackets). It can have values of 80 &mu;s 
    (12 km), 160 &mu;s (24 km), 320 &mu;s (48 km) and 640 &mu;s (96 km).
    <BR><BR>

  <DD><B>Value 13: Bottom range gate number </B> <FONT
    class="code_red">I</FONT><BR> The bottom and top (next value)
    range gate numbers are given for reference only. The total number
    number of range gates was already given in value 2 and the range
    of each gate from the radar is shown in the first column of data
    for each dwell. <BR><BR>

  <DD><B>Value 14: Top range gate number </B> <FONT
    class="code_red">I</FONT><BR><BR>

  <DD><B>Value 15: Number of coherent integrations </B> <FONT
    class="code_red">I</FONT><BR>
    This is the number of raw radar samples averaged.<BR><BR>

  <DD><B>Value 16: Discrete Fourier transform length </B> <FONT
    class="code_red">I</FONT><BR>
    This is the number of (averaged) samples from which a Doppler power
     spectrum is derived.<BR><BR>

  <DD><B>Value 17: Number of incoherent integrations </B> <FONT
    class="code_red">I</FONT><BR>
    This is the number of Doppler power spectra averaged together before
    the principal spectral parameters are evaluated.<BR><BR>
    
</DL>

<B>Reading primary variables</B><BR>

Each primary variable line contains 7 values (a mixture of floating
point numbers, <FONT class="code_red">F</FONT>, and integers, <FONT
class="code_red">I</FONT>), shown here for the first range gate of the first
dwell of the first cycle:<BR>

<FONT class="code_green"> 1645.0  35.39  52.52   0.798  0.267  34 1</FONT>

<DL>
  <DD><B>Value 1: Range from the radar (m) </B>
    <FONT class="code_red">F</FONT><BR>
    Technically speaking this is the first independent variable rather
    than a primary variable. The same range gate grid is used for all
    dwells within the file and so only needs to be saved once. The
    range is given in metres away from the radar, which is at 50 m
    above mean sea level.<BR><BR>

  <DD><B>Value 2: Spectral noise power (dB) </B>
    <FONT class="code_red">F</FONT><BR>
    The noise power is included for reference and is not typically used
    as a parameter in its own right.<BR><BR>

  <DD><B>Value 3: Radar return signal power (dB) </B>
    <FONT class="code_red">F</FONT><BR><BR>

  <DD><B>Value 4: Radial air velocity (m/s) </B>
    <FONT class="code_red">F</FONT><BR>
    Positive values imply motion AWAY from the radar.<BR><BR>

  <DD><B>Value 5: Radar return spectral width (m/s) </B>
    <FONT class="code_red">F</FONT><BR>
    This corresponds to an e-1/2 half-width. Follow
    <A href="beam_broad.html">this link</A> for further information.<BR><BR>

  <DD><B>Value 6: Peak power spectral density (PSD) relative to the mean noise PSD (dB) </B> <FONT class="code_red">I</FONT><BR>
    This is used for reliability flagging. Signals with a value of greater
    than 10 dB are typically clearly distinguishable above the background
    noise. Signals with values of less than 10 dB might still be reliable
    but should be treated with caution.<BR><BR>

  <DD><B>Value 7: Reliability flag </B>
    <FONT class="code_red">I</FONT><BR> 
    A value of 1 implies that the spectral parameters (values 3 - 5) are
    reliable and a value of 0 implies that they are not. The reliability
    flagging is based on the time continuity of the radial velocities.
    <BR><BR>
</DL>


<!*** Links and references ***>
<A name="internal">
<DL><B>Internal Links:</B>
  <DD><A href="#top">Return to the top of the page</A>
  <DD><A href="data_access.html">Gaining access to the data</A>
  <DD><A href="file_naming_conventions.html">File naming convention</A>
  <DD><A href="archiving_conventions.html">Data archiving convention</A>
  <DD><A href="data_locations.html">Data locations</A>
  <DD><A href="sig_proc_version_nrs.html">The differences between
  signal processing versions</A>
  <DD><A href="file_contents.html">The contents of other data files</A>
</DL>

<A name="external">
<DL><B>External Links:</B>
  <DD><A href="
http://badc.nerc.ac.uk/help/formats/NASA-Ames/G-and-H-June-1998.html">Full
       description of the NASA-Ames formats: Gaines and Hipskind [1998]</A>

<!*** Close page ***>
    </TD>
  </TR>

  <TR><TD align="centre" bgcolor="#ffffff" colspan="2" valign="top">
    <IMG height="10" src="FIGS/pixel_white.png"></TD>
  </TR>

  <TR><TD align="left" bgcolor="#ffd000" colspan="2" valign="bottom">
    <I>Page maintained by <A href="mailto:D.A.Hooper@rl.ac.uk">
         David Hooper</A><BR>
       Last updated 13th January 2005</I>
  </TD></TR>
</TABLE>
</BODY>
</HTML>
